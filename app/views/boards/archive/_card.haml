%li.task-item.archivised{ data: { id: card.id }}
  .label-flag{ style: "background-color:#{ card.label_color };" }
  %a{ href: "#card-#{ card.id }", data: { toggle: 'collapse' } }
    =card.title
    %span.caret
  = link_to 'restore', dearchivise_card_path(card), class: 'btn btn-primary btn-xs white-font pull-right'
  = link_to 'remove', destroy_permanently_card_path(card), method: :delete, class: 'btn btn-danger btn-xs white-font pull-right'
  .collapse{ id: "card-#{ card.id }" }
    .task-details-part
      = label_tag :end_date
      = text_field_tag :end_date, card.end_date, class: 'form-control datepicker', id: "card-end-date-#{ card.id }", disabled: true

:javascript
  function format(state) {
    if (!state.id) return state.text; // optgroup
    return "<div class='color-sample' style='display:inline-block;width:10px;height:10px;margin-right:15px;background-color:" + state.id + ";' /><span>" + state.text + "</span>"
  }
